############################################################
Pylons/Routes：尽量用named routes
############################################################
:category: Computer
:tags: Python,Pylons
:date: 2008-01-13 04:28



如果用默认的没有名字的routes的话用url_for()就不太容易控制想要的URL，尤其是不想让action在生成的URL中出现时，那个默认的action参数index常常会跳出来捣乱。

比如说我在controller *blog* 里有一个action *detail*
用来生成一篇文章的详细页面。routing配置如下:

.. code-block:: python

 map.connect(':controller/:action/:id',requirements={'id':r'\\d+'})

那么默认地在template里用::

 ${h.url_for(controller='blog',action='detail',id=1)}

的话就会得到 **/blog/detail/1**
这样的URL。但是如果我不想让detail在生成的URL中出现而希望生成的是 **/blog/1** 的话上面的routing设定就办不到了。

如果我们如下定义一个叫 *detail* 的named route:

.. code-block :: py

 map.connect('detail','blog/:id',controller='blog', action='detail',
             requirements={'id':r'\\d+'})
 map.connect(':controller/:action/:id',requirements={'id':r'\\d+'})

然后在template里这样调用url_for()，就可以如愿以偿了::

 ${h.url_for('detail',id=1)}
 


