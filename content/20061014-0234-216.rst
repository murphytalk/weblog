##############################
在emacs裏使用cscope
##############################
:category: Memo
:tags: Memo,Software,Emacs
:date: 2006-10-14 02:34



"Cscope":http://cscope.sourceforge.net 沒有CTAGS快，但是功能強大多了。它支持的搜索有：

1. all references to a symbol

1. global definitions

1. functions called by a function

1. functions calling a function

1. text string

1. regular expression pattern

1. a file

1. files including a file

Cscope的contrib裏帶了給emacs用的包xcscope。裏面除了elisp腳本，還有個叫cscope-indexer的sh腳本，如果是在Linux下的話所有的工作就可以在emacs裏做了，否則的話還得到命令行下去創建一下搜索用database。

創建database有兩种方式。直接運行::

  cscope -b -q -R

或者先把需要掃描的文件羅列在cscope.files裏后再在同一目錄下運行cscope::

  cscope -b -q

第一种方式會掃描當前目錄及子目錄下所有的.c , .h , .y 和 .l 文件。要是想略過一些不關心的文件或者需要掃描其他後綴的文件如cpp、java的話，則可採用第二种方式。cscope.files裏可以採用相對路徑，一般來説就是相對源代碼的頂級目錄吧。

現在就可以回到emacs，打開任一個被掃描過的源代碼文件，讓cscope去搜了。xcscope足夠聰明，會根據你所処的路徑不同選用合適的database文件，不需要事先作任何設置。相比之下用TAGS要自己設那個tag list就太麻煩了。

就是速度有點慢，完全沒有TAGS那種一觸即動立馬就位的感覺，慢得和grep有一拼。不過搜索結果倒是很漂亮，在代碼間來回跳來跳去也方便。。。就是不知道速度還能提高不能？



**UPDATE**

供emacs在中使用操纵cscope的xcsope对用 -q 开关生成的database似乎支持有问题。Linux Kernel的代码如果用-q解析的话，无法从emacs中查询。