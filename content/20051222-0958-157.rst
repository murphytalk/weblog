########################################
kernel Trace Toolkit
########################################
:category: Computer
:tags: Linux
:date: 2005-12-22 09:58



翻出来的一个脚本，以前用来处理kernel Trace Toolkit的输出的。从参数接受PID，用逗号分开，或者用-指定范围，然后导出CPU使用率。

使用到了sed和gawk::

   #!/bin/sh
   TRACE_KIT=/home/ro/Kernel/trace/TraceToolkit-0.9.5-hhl/Visualizer/tracevisualizer
   TRACE_TMP=traceoutput.tmp 
  
   #accept one parameter - pid
   print_cputime(){
   	SED_SCRIPT="/Process ($1\\,/,/System call/ p"
  	sed -n -e "$SED_SCRIPT" $TRACE_TMP | awk -v pid=$1 '{if($0~/Time running/) {print pid","$6;exit;}}' 
   }
  
   if [ ! -n "$2" ]
   then
  	echo "Usage: `basename $0` tracefile pid1 pid2 ..."
  	exit
   fi
  
   if [ ! -e "$1" ]
   then
  	echo cannot find trace file : $1
  	exit
   fi