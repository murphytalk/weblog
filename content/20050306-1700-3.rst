######################
升级Linux的根分区
######################
:category: Computer
:tags: Linux
:date: 2005-03-06 17:00



需要一个备用分区供来转移数据。假设根分区是/dev/hda1、备用分区是/dev/hda2::

 $ mkfs -t ext2 /dev/hda4
 $ mkdir /mnt/temp
 $ mount -t ext2 /dev/hda2 /mnt/temp
 $ cd /
 $ tar lcf - .|(cd /mnt/temp; tar xpvf - )

tar的l参数是表示只拷贝物理存在于该分区上的内容。

备份结束后，以备份分区作为根重新启动，此时可以升级其实就是用新的文件系统重建整个根分区。然后再把备份的东西拷贝回来::

 $ mount -t xfs /dev/hda1 /mnt/temp
 $ cd /
 $ tar lcf - .|(cd /mnt/temp; tar xpvf -)


