####################################
lighttpd的fastcgi設置
####################################
:category: Memo
:tags: Linux,Memo
:date: 2006-10-22 09:27



下午爲了裝MPD的Web客戶端，又跑了個PHP的FastCGI。順便總結了下lighttpd的FastCGI的設置。

fastcgi.server是張以文件後綴名或prefix (開頭為 / 時)為key的對照表，把不同文件類型或prefix（URL的一段）映射到各對應的fastcgi server上去。只要server.modules中打開了mod_fastcgi並且fastcgi.server也設置好就會起作用了，但是對於我的例子：MPD的要轉給PHP的CGI，靜態文件如css/javascript和圖形/照片等由lighttpd之間處理，其他的包括ROOT統統轉給我的django，就要耍點小花招了::

 url.rewrite-once = (
    "^(/media.*)$" => "$1",
    "^(/blogimages.*)$" => "$1",
    "^(/mpd.*)$" => "$1",
    "^(/.*)$" => "/mysite.fcgi$1",
 )

rewrite的作用是在任何處理前替換URL。=>的左側是正則表達式，用來匹配URL；右側就是替換后的結果了。=>右側的$是對左側正則表達式匹配group的引用，$1就是第一組，所以前三條規則的意思是如果URL以/media等開頭的話保留原樣(左側整個URL被包括在了group裏，而右側就是簡單地對該group的引用)，而除此之外，全部替換為/mysite.fcgi/??????。而/mysite.fcgi就是在fastcgi.server裏定義的django fastcgi了。


