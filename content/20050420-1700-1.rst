######################################
Linux服务器开始运行dhcpd服务
######################################
:category: Computer
:tags: Linux
:date: 2005-04-20 17:00



/etc/dhcpd.conf内容如下::

 default-lease-time 600;
 max-lease-time 7200;
 ddns-update-style ad-hoc;
 option subnet-mask 255.255.255.0;
 option broadcast-address 192.168.0.255;
 option routers 192.168.0.1;
 option domain-name-servers 218.176.253.65,218.176.253.97;
 option domain-name "murphytalk.net";

 subnet 192.168.0.0 netmask 255.255.255.0 {
    range 192.168.0.10 192.168.0.200;
 }

不知道为什么在slackware上装好dhcpd包后在/etc/rc.d下没有看到启动dhcpd服务的脚本，于是自己建了个，内容拷贝自rc.inetd，把inetd换成dhcpd就行了;) 唯一需要注意的地方是dhcpd默认在eth0侦听dhcp请求，我的情况在 /usr/sbin/dhcpd 后加一eth1即可。

slackware的服务启动感觉不如ArchLinux巧妙，完全是在诸rc脚本中写死的，不象ArchLinux只要在rc.conf中按照希望启动顺序罗列服务名，然后把相应服务的启动/停止脚本放到/etc/rc.d下就行了。此外还可以指定哪些服务后台启动（不等待其启动完毕就继续）。

不过我的服务器我还是不想换掉slackware的;) 在/etc/rc.d/rc.local中启动它吧::

 #start dhcpd
 if [ -x /etc/rc.d/rc.dhcpd]; then
   /etc/rc.d/rc.dhcpd start
 fi

dhcpd会把ip的lease情况记录在/var/state/dhcp/dhcpd.leases中。


